<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Typeflow | Master Touch Typing</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Header -->
    <div class="logo-header">
        <div class="brand">Typeflow</div>
    </div>
    <div class="mode-switch-header">
        <button class="theme-toggle" id="theme-toggle" type="button" aria-pressed="false">
            Dark mode
        </button>
    </div>

    <!-- Main App Container -->
    <div class="app">
        <!-- Navigation Tabs -->
        <nav class="mode-nav" role="tablist" aria-label="Application modes">
            <button class="mode-tab active" data-mode="test" role="tab" aria-selected="true">
                <span class="tab-icon">‚å®Ô∏è</span>
                <span class="tab-label">Test</span>
            </button>
            <button class="mode-tab" data-mode="lessons" role="tab" aria-selected="false">
                <span class="tab-icon">üìö</span>
                <span class="tab-label">Lessons</span>
            </button>
            <button class="mode-tab" data-mode="practice" role="tab" aria-selected="false">
                <span class="tab-icon">üéØ</span>
                <span class="tab-label">Weak Keys</span>
            </button>
            <button class="mode-tab" data-mode="dashboard" role="tab" aria-selected="false">
                <span class="tab-icon">üìä</span>
                <span class="tab-label">Dashboard</span>
            </button>
            <button class="mode-tab" data-mode="finger-training" role="tab" aria-selected="false">
                <span class="tab-icon">üñêÔ∏è</span>
                <span class="tab-label">Finger Training</span>
            </button>
        </nav>

        <!-- Test Mode -->
        <section class="mode-section active" id="test-mode" role="tabpanel">
            <div class="panel">
                <div class="controls-row">
                    <div class="timer-group" role="group" aria-label="Timer options">
                        <button class="timer-btn active" data-time="15">15s</button>
                        <button class="timer-btn" data-time="30">30s</button>
                        <button class="timer-btn" data-time="60">60s</button>
                    </div>

                    <div class="stats">
                        <div class="stat-card">
                            <span class="stat-label">WPM</span>
                            <span class="stat-value" id="wpm">0</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-label">Accuracy</span>
                            <span class="stat-value" id="accuracy">100%</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-label">Time</span>
                            <span class="stat-value" id="timer">15</span>
                        </div>
                    </div>
                </div>

                <div class="options-row" role="group" aria-label="Text options">
                    <label class="toggle">
                        <input type="checkbox" id="toggle-caps">
                        <span>Include capitals</span>
                    </label>
                    <label class="toggle">
                        <input type="checkbox" id="toggle-numbers">
                        <span>Include numbers</span>
                    </label>
                    <label class="toggle">
                        <input type="checkbox" id="toggle-symbols">
                        <span>Include symbols</span>
                    </label>
                </div>

                <div class="text-card" aria-live="polite">
                    <div class="text-display" id="text-display"></div>
                </div>

                <div class="input-card">
                    <input
                        type="text"
                        id="typing-input"
                        placeholder="Start typing..."
                        autocomplete="off"
                        spellcheck="false"
                    >
                    <p class="hint">Tip: Keep a steady rhythm. Press Esc to restart.</p>
                </div>

                <div class="actions">
                    <button class="btn primary" id="start-btn">Restart</button>
                    <button class="btn ghost" id="new-text-btn">New Text</button>
                </div>
            </div>
        </section>

        <!-- Lessons Mode -->
        <section class="mode-section" id="lessons-mode" role="tabpanel" hidden>
            <div class="panel">
                <div class="lesson-header">
                    <h2 class="section-title">Progressive Lessons</h2>
                    <p class="section-subtitle">Master touch typing step by step</p>
                </div>

                <div class="lessons-grid" id="lessons-grid">
                    <!-- Lessons will be dynamically generated -->
                </div>
            </div>

            <!-- Lesson Practice View (Hidden by default) -->
            <div class="panel lesson-practice hidden" id="lesson-practice">
                <button class="back-btn" id="back-to-lessons">‚Üê Back to Lessons</button>
                
                <div class="lesson-info">
                    <h3 class="lesson-title" id="lesson-title">Lesson Title</h3>
                    <p class="lesson-description" id="lesson-description">Description</p>
                    <div class="focus-keys" id="focus-keys">Focus: <span></span></div>
                </div>

                <div class="lesson-stats">
                    <div class="stat-card">
                        <span class="stat-label">WPM</span>
                        <span class="stat-value" id="lesson-wpm">0</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-label">Accuracy</span>
                        <span class="stat-value" id="lesson-accuracy">100%</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-label">Progress</span>
                        <span class="stat-value" id="lesson-progress">0%</span>
                    </div>
                </div>

                <div class="text-card" aria-live="polite">
                    <div class="text-display" id="lesson-text-display"></div>
                </div>

                <div class="input-card">
                    <input
                        type="text"
                        id="lesson-input"
                        placeholder="Start typing..."
                        autocomplete="off"
                        spellcheck="false"
                    >
                    <p class="hint">Complete with 90%+ accuracy to unlock next lesson</p>
                </div>

                <div class="actions">
                    <button class="btn primary" id="lesson-restart">Restart Lesson</button>
                </div>
            </div>
        </section>

        <!-- Weak Keys Practice Mode -->
        <section class="mode-section" id="practice-mode" role="tabpanel" hidden>
            <div class="panel">
                <div class="practice-header">
                    <h2 class="section-title">Weak Key Practice</h2>
                    <p class="section-subtitle">Focus on your most challenging keys</p>
                </div>

                <div class="weak-keys-display" id="weak-keys-display">
                    <div class="weak-keys-card">
                        <h3>Your Weakest Keys</h3>
                        <div class="weak-keys-list" id="weak-keys-list">
                            <p class="empty-state">Complete some typing tests to identify weak keys</p>
                        </div>
                    </div>
                </div>

                <div class="practice-stats">
                    <div class="stat-card">
                        <span class="stat-label">WPM</span>
                        <span class="stat-value" id="practice-wpm">0</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-label">Accuracy</span>
                        <span class="stat-value" id="practice-accuracy">100%</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-label">Errors</span>
                        <span class="stat-value" id="practice-errors">0</span>
                    </div>
                </div>

                <div class="text-card" aria-live="polite">
                    <div class="text-display" id="practice-text-display"></div>
                </div>

                <div class="input-card">
                    <input
                        type="text"
                        id="practice-input"
                        placeholder="Start typing..."
                        autocomplete="off"
                        spellcheck="false"
                    >
                    <p class="hint">Practice makes perfect - focus on accuracy first</p>
                </div>

                <div class="actions">
                    <button class="btn primary" id="practice-restart">New Practice</button>
                </div>
            </div>
        </section>

        <!-- Finger Training Mode -->
        <section class="mode-section" id="finger-training-mode" role="tabpanel" hidden>
            <div class="panel">
                <div class="finger-header">
                    <h2 class="section-title">Finger Placement Training</h2>
                    <p class="section-subtitle">Learn proper finger positioning with visual guidance</p>
                </div>

                <!-- Finger Position Guide -->
                <div class="finger-guide-card">
                    <h3>Hand Position Guide</h3>
                    <div class="hand-positions">
                        <div class="hand-position left">
                            <div class="hand-label">Left Hand</div>
                            <div class="finger-mapping">
                                <div class="finger-item pinky">
                                    <span class="finger-emoji">ü§ô</span>
                                    <span class="finger-name">Pinky</span>
                                    <span class="finger-keys">A Q Z 1 ` Tab Shift</span>
                                </div>
                                <div class="finger-item ring">
                                    <span class="finger-emoji">üíç</span>
                                    <span class="finger-name">Ring</span>
                                    <span class="finger-keys">S W X 2</span>
                                </div>
                                <div class="finger-item middle">
                                    <span class="finger-emoji">üñï</span>
                                    <span class="finger-name">Middle</span>
                                    <span class="finger-keys">D E C 3</span>
                                </div>
                                <div class="finger-item index">
                                    <span class="finger-emoji">‚òùÔ∏è</span>
                                    <span class="finger-name">Index</span>
                                    <span class="finger-keys">F R V T G B 4 5</span>
                                </div>
                            </div>
                        </div>
                        <div class="hand-position right">
                            <div class="hand-label">Right Hand</div>
                            <div class="finger-mapping">
                                <div class="finger-item index">
                                    <span class="finger-emoji">‚òùÔ∏è</span>
                                    <span class="finger-name">Index</span>
                                    <span class="finger-keys">J U M Y H N 6 7</span>
                                </div>
                                <div class="finger-item middle">
                                    <span class="finger-emoji">üñï</span>
                                    <span class="finger-name">Middle</span>
                                    <span class="finger-keys">K I , 8</span>
                                </div>
                                <div class="finger-item ring">
                                    <span class="finger-emoji">üíç</span>
                                    <span class="finger-name">Ring</span>
                                    <span class="finger-keys">L O . 9</span>
                                </div>
                                <div class="finger-item pinky">
                                    <span class="finger-emoji">ü§ô</span>
                                    <span class="finger-name">Pinky</span>
                                    <span class="finger-keys">; P / 0 ' [ ] \ Enter Shift</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="thumb-guide">
                        <span class="thumb-emoji">üëç</span>
                        <span class="thumb-text">Both Thumbs: Spacebar</span>
                    </div>
                </div>

                <!-- Visual Keyboard -->
                <div class="keyboard-container">
                    <div class="keyboard-visual" id="keyboard-visual">
                        <!-- Number Row -->
                        <div class="keyboard-row">
                            <div class="key" data-key="`" data-finger="left-pinky">~<br>`</div>
                            <div class="key" data-key="1" data-finger="left-pinky">!<br>1</div>
                            <div class="key" data-key="2" data-finger="left-ring">@<br>2</div>
                            <div class="key" data-key="3" data-finger="left-middle">#<br>3</div>
                            <div class="key" data-key="4" data-finger="left-index">$<br>4</div>
                            <div class="key" data-key="5" data-finger="left-index">%<br>5</div>
                            <div class="key" data-key="6" data-finger="right-index">^<br>6</div>
                            <div class="key" data-key="7" data-finger="right-index">&amp;<br>7</div>
                            <div class="key" data-key="8" data-finger="right-middle">*<br>8</div>
                            <div class="key" data-key="9" data-finger="right-ring">(<br>9</div>
                            <div class="key" data-key="0" data-finger="right-pinky">)<br>0</div>
                            <div class="key" data-key="-" data-finger="right-pinky">_<br>-</div>
                            <div class="key" data-key="=" data-finger="right-pinky">+<br>=</div>
                        </div>

                        <!-- Top Row (QWERTY) -->
                        <div class="keyboard-row">
                            <div class="key" data-key="q" data-finger="left-pinky">Q</div>
                            <div class="key" data-key="w" data-finger="left-ring">W</div>
                            <div class="key" data-key="e" data-finger="left-middle">E</div>
                            <div class="key" data-key="r" data-finger="left-index">R</div>
                            <div class="key" data-key="t" data-finger="left-index">T</div>
                            <div class="key" data-key="y" data-finger="right-index">Y</div>
                            <div class="key" data-key="u" data-finger="right-index">U</div>
                            <div class="key" data-key="i" data-finger="right-middle">I</div>
                            <div class="key" data-key="o" data-finger="right-ring">O</div>
                            <div class="key" data-key="p" data-finger="right-pinky">P</div>
                            <div class="key" data-key="[" data-finger="right-pinky">{<br>[</div>
                            <div class="key" data-key="]" data-finger="right-pinky">}<br>]</div>
                            <div class="key" data-key="\\" data-finger="right-pinky">|<br>\</div>
                        </div>

                        <!-- Home Row (ASDF) -->
                        <div class="keyboard-row">
                            <div class="key home-key" data-key="a" data-finger="left-pinky">A</div>
                            <div class="key home-key" data-key="s" data-finger="left-ring">S</div>
                            <div class="key home-key" data-key="d" data-finger="left-middle">D</div>
                            <div class="key home-key" data-key="f" data-finger="left-index">F</div>
                            <div class="key" data-key="g" data-finger="left-index">G</div>
                            <div class="key" data-key="h" data-finger="right-index">H</div>
                            <div class="key home-key" data-key="j" data-finger="right-index">J</div>
                            <div class="key home-key" data-key="k" data-finger="right-middle">K</div>
                            <div class="key home-key" data-key="l" data-finger="right-ring">L</div>
                            <div class="key home-key" data-key=";" data-finger="right-pinky">:<br>;</div>
                            <div class="key" data-key="'" data-finger="right-pinky">"<br>'</div>
                        </div>

                        <!-- Bottom Row (ZXCV) -->
                        <div class="keyboard-row">
                            <div class="key" data-key="z" data-finger="left-pinky">Z</div>
                            <div class="key" data-key="x" data-finger="left-ring">X</div>
                            <div class="key" data-key="c" data-finger="left-middle">C</div>
                            <div class="key" data-key="v" data-finger="left-index">V</div>
                            <div class="key" data-key="b" data-finger="left-index">B</div>
                            <div class="key" data-key="n" data-finger="right-index">N</div>
                            <div class="key" data-key="m" data-finger="right-index">M</div>
                            <div class="key" data-key="," data-finger="right-middle">&lt;<br>,</div>
                            <div class="key" data-key="." data-finger="right-ring">&gt;<br>.</div>
                            <div class="key" data-key="/" data-finger="right-pinky">?<br>/</div>
                        </div>

                        <!-- Spacebar -->
                        <div class="keyboard-row">
                            <div class="key spacebar" data-key=" " data-finger="thumb">Space</div>
                        </div>
                    </div>

                    <div class="keyboard-legend">
                        <div class="legend-item"><div class="legend-box home-key"></div><span>Home Row Keys</span></div>
                        <div class="legend-item"><div class="legend-box left-pinky"></div><span>Left Pinky</span></div>
                        <div class="legend-item"><div class="legend-box left-ring"></div><span>Left Ring</span></div>
                        <div class="legend-item"><div class="legend-box left-middle"></div><span>Left Middle</span></div>
                        <div class="legend-item"><div class="legend-box left-index"></div><span>Left Index</span></div>
                        <div class="legend-item"><div class="legend-box right-index"></div><span>Right Index</span></div>
                        <div class="legend-item"><div class="legend-box right-middle"></div><span>Right Middle</span></div>
                        <div class="legend-item"><div class="legend-box right-ring"></div><span>Right Ring</span></div>
                        <div class="legend-item"><div class="legend-box right-pinky"></div><span>Right Pinky</span></div>
                    </div>
                </div>

                <!-- Interactive Practice -->
                <div class="finger-practice-section">
                    <h3>Interactive Practice</h3>
                    <p class="practice-instruction" id="finger-instruction">Press any key to see which finger to use!</p>
                    
                    <div class="current-key-display" id="current-key-display">
                        <div class="key-to-press">
                            <span class="key-char" id="target-key-char">-</span>
                            <span class="key-label">Press this key</span>
                        </div>
                        <div class="finger-to-use">
                            <span class="finger-icon" id="target-finger-icon">üëÜ</span>
                            <span class="finger-label" id="target-finger-name">Waiting...</span>
                        </div>
                    </div>

                    <div class="practice-controls">
                        <button class="btn primary" id="start-finger-drill">Start Finger Drill</button>
                        <button class="btn ghost" id="random-key-practice">Random Key</button>
                    </div>

                    <div class="finger-stats" id="finger-drill-stats" style="display: none;">
                        <div class="stat-card">
                            <span class="stat-label">Correct</span>
                            <span class="stat-value" id="finger-correct">0</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-label">Wrong</span>
                            <span class="stat-value" id="finger-wrong">0</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-label">Accuracy</span>
                            <span class="stat-value" id="finger-accuracy">100%</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Dashboard Mode -->
        <section class="mode-section" id="dashboard-mode" role="tabpanel" hidden>
            <div class="panel">
                <div class="dashboard-header">
                    <h2 class="section-title">Your Progress</h2>
                    <p class="section-subtitle">Track your typing journey</p>
                </div>

                <div class="level-card">
                    <div class="level-info">
                        <div class="level-badge" id="level-badge">Beginner</div>
                        <div class="xp-info">
                            <span class="xp-label">Experience Points</span>
                            <span class="xp-value" id="xp-value">0 XP</span>
                        </div>
                    </div>
                    <div class="xp-bar">
                        <div class="xp-progress" id="xp-progress" style="width: 0%"></div>
                    </div>
                    <p class="xp-next" id="xp-next">500 XP to next level</p>
                </div>

                <div class="hero-metric">
                    <div class="metric-main">
                        <span class="metric-label">Best Typing Speed</span>
                        <span class="metric-value" id="best-wpm-display">0</span>
                        <span class="metric-unit">WPM</span>
                    </div>
                    <div class="metric-streak">
                        <span class="streak-icon">üî•</span>
                        <span class="streak-value" id="streak-value">0</span>
                        <span class="streak-label">day streak</span>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <span class="dashboard-label">Average Accuracy</span>
                        <span class="dashboard-value" id="avg-accuracy">0%</span>
                    </div>
                    <div class="dashboard-card">
                        <span class="dashboard-label">Total Practice Time</span>
                        <span class="dashboard-value" id="total-time">0m</span>
                    </div>
                    <div class="dashboard-card">
                        <span class="dashboard-label">Lessons Completed</span>
                        <span class="dashboard-value" id="completed-lessons">0/6</span>
                    </div>
                    <div class="dashboard-card">
                        <span class="dashboard-label">Tests Taken</span>
                        <span class="dashboard-value" id="tests-taken">0</span>
                    </div>
                </div>

                <div class="dashboard-weak-keys">
                    <h3>Keys to Improve</h3>
                    <div class="weak-keys-chart" id="dashboard-weak-keys">
                        <p class="empty-state">No data yet - start practicing!</p>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Results Modal -->
    <div class="results hidden" id="results" role="dialog" aria-modal="true">
        <div class="results-card">
            <h2>Test Complete</h2>
            
            <div class="performance-rating" id="performance-rating">
                <span class="rating-label">Performance</span>
                <span class="rating-badge" id="rating-badge">Excellent</span>
            </div>

            <div class="results-grid">
                <div class="result-main">
                    <span>Typing Speed</span>
                    <strong id="result-wpm">0 WPM</strong>
                </div>
                <div class="result-side">
                    <span>Accuracy</span>
                    <strong id="result-accuracy">100%</strong>
                </div>
                <div class="result-side">
                    <span>Correct</span>
                    <strong id="result-correct">0</strong>
                </div>
                <div class="result-side">
                    <span>Mistakes</span>
                    <strong id="result-incorrect">0</strong>
                </div>
            </div>

            <div class="xp-gained" id="xp-gained">
                <span class="xp-icon">‚ú®</span>
                <span class="xp-text">+<span id="xp-amount">0</span> XP</span>
            </div>

            <div class="results-actions">
                <button class="btn primary" id="results-restart">Restart</button>
                <button class="btn ghost" id="results-new-text">New Text</button>
            </div>
        </div>
    </div>

    <!-- Lesson Complete Modal -->
    <div class="results hidden" id="lesson-complete-modal" role="dialog" aria-modal="true">
        <div class="results-card">
            <h2>üéâ Lesson Complete!</h2>
            
            <div class="results-grid">
                <div class="result-main">
                    <span>Final Speed</span>
                    <strong id="lesson-result-wpm">0 WPM</strong>
                </div>
                <div class="result-side">
                    <span>Accuracy</span>
                    <strong id="lesson-result-accuracy">100%</strong>
                </div>
                <div class="result-side">
                    <span>Time Taken</span>
                    <strong id="lesson-result-time">0s</strong>
                </div>
            </div>

            <div class="xp-gained">
                <span class="xp-icon">‚ú®</span>
                <span class="xp-text">+<span id="lesson-xp-amount">0</span> XP</span>
            </div>

            <div class="results-actions">
                <button class="btn primary" id="next-lesson-btn">Next Lesson</button>
                <button class="btn ghost" id="back-to-lessons-modal">Back to Lessons</button>
            </div>
        </div>
    </div>
    <!-- Feedback Button (Fixed Position) -->
<button class="feedback-button" id="feedback-btn" aria-label="Give Feedback">
    üí¨ Feedback
</button>

<!-- Feedback Modal -->
<div class="feedback-modal hidden" id="feedback-modal">
    <div class="feedback-card">
        <button class="close-modal" id="close-feedback">‚úï</button>
        <h2>Help Us Improve! üöÄ</h2>
        <p>Your feedback helps make Typeflow better for everyone.</p>
        
        <form id="feedback-form">
            <div class="form-group">
                <label>What did you like? ‚≠ê</label>
                <textarea name="liked" rows="3" placeholder="e.g., The finger training mode was really helpful..."></textarea>
            </div>
            
            <div class="form-group">
                <label>What needs improvement? üîß</label>
                <textarea name="improve" rows="3" placeholder="e.g., It would be great if..."></textarea>
            </div>
            
            <div class="form-group">
                <label>Any bugs or issues? üêõ</label>
                <textarea name="bugs" rows="2" placeholder="e.g., The timer didn't work when..."></textarea>
            </div>
            
            <div class="form-group">
                <label>Your email (optional)</label>
                <input type="email" name="email" placeholder="student@university.edu">
            </div>
            
            <button type="submit" class="btn primary">Submit Feedback</button>
        </form>
        
        <div class="feedback-success hidden" id="feedback-success">
            <span class="success-icon">‚úÖ</span>
            <p>Thank you! Your feedback has been recorded.</p>
        </div>
    </div>
</div>

    <script src="script.js"></script>
</body>
</html>